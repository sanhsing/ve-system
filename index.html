<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VE-System è™›æ“¾åœ°çƒç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%); }
        .loading-spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .bounce { animation: bounce 0.5s; }
        @keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .fade-in { animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .progress-bar { transition: width 0.3s; }
        .card { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); }
        .mind-map-node { transition: all 0.3s; }
        .mind-map-node:hover { transform: scale(1.05); }
        .knowledge-card { border-left: 4px solid; }
    </style>
</head>
<body class="gradient-bg min-h-screen text-white">
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useCallback } = React;
const API = 'https://ve-system.onrender.com';

// === é€šç”¨çµ„ä»¶ ===
const Loading = () => <div className="flex justify-center p-8"><div className="loading-spin text-4xl">âš™ï¸</div></div>;
const Modal = ({ open, onClose, title, children, wide }) => {
    if (!open) return null;
    return (
        <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4" onClick={onClose}>
            <div className={`card rounded-2xl ${wide ? 'max-w-5xl' : 'max-w-2xl'} w-full max-h-[90vh] overflow-hidden border border-slate-600 fade-in`} onClick={e => e.stopPropagation()}>
                <div className="p-4 border-b border-slate-700 flex justify-between items-center bg-slate-800/50">
                    <h2 className="text-xl font-bold">{title}</h2>
                    <button onClick={onClose} className="text-slate-400 hover:text-white text-2xl leading-none">&times;</button>
                </div>
                <div className="p-4 overflow-y-auto max-h-[80vh]">{children}</div>
            </div>
        </div>
    );
};

const Navbar = ({ page, setPage }) => {
    const items = [
        { id: 'home', icon: 'ğŸ ', name: 'é¦–é ' },
        { id: 'edu', icon: 'ğŸ“š', name: 'æ•™è‚²ç³»çµ±' },
        { id: 've', icon: 'ğŸŒ', name: 'è™›æ“¬åœ°çƒ' },
    ];
    return (
        <nav className="bg-slate-900/80 backdrop-blur border-b border-slate-700 sticky top-0 z-50">
            <div className="max-w-6xl mx-auto px-4 h-14 flex items-center justify-between">
                <div className="flex items-center gap-2 cursor-pointer" onClick={() => setPage('home')}>
                    <span className="text-2xl">ğŸŒŒ</span>
                    <span className="font-bold text-lg bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">VE-System</span>
                </div>
                <div className="flex gap-1">
                    {items.map(i => (
                        <button key={i.id} onClick={() => setPage(i.id)}
                            className={`px-3 py-1.5 rounded-lg text-sm flex items-center gap-1 transition ${page === i.id ? 'bg-blue-600' : 'hover:bg-slate-700'}`}>
                            <span>{i.icon}</span><span className="hidden sm:inline">{i.name}</span>
                        </button>
                    ))}
                </div>
            </div>
        </nav>
    );
};

// === é¦–é  ===
const Home = ({ setPage }) => (
    <div className="space-y-6">
        <div className="text-center py-8">
            <h1 className="text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">è™›æ“¾åœ°çƒç³»çµ±</h1>
            <p className="text-slate-400 mt-2">Virtual Earth System v1.0</p>
        </div>
        <div className="grid md:grid-cols-2 gap-6">
            <div onClick={() => setPage('edu')} className="card rounded-xl p-6 border border-slate-700 cursor-pointer hover:border-blue-500 transition">
                <div className="text-4xl mb-4">ğŸ“š</div>
                <h2 className="text-xl font-bold">æ•™è‚²ç³»çµ±</h2>
                <p className="text-slate-400 text-sm mt-2">108èª²ç¶± Â· çŸ¥è­˜ç¯€é» Â· å¿ƒæ™ºåœ– Â· AIèª²ç¨‹</p>
                <div className="mt-3 flex flex-wrap gap-2">
                    <span className="text-xs px-2 py-1 bg-blue-900/50 text-blue-400 rounded">14 ç§‘ç›®</span>
                    <span className="text-xs px-2 py-1 bg-purple-900/50 text-purple-400 rounded">103 æ¦‚å¿µ</span>
                    <span className="text-xs px-2 py-1 bg-green-900/50 text-green-400 rounded">33 è©³è§£</span>
                </div>
            </div>
            <div onClick={() => setPage('ve')} className="card rounded-xl p-6 border border-slate-700 cursor-pointer hover:border-green-500 transition">
                <div className="text-4xl mb-4">ğŸŒ</div>
                <h2 className="text-xl font-bold">è™›æ“¬åœ°çƒ E18K</h2>
                <p className="text-slate-400 text-sm mt-2">é˜²è©éŠæˆ² Â· NPCå°è©± Â· ä»»å‹™ç³»çµ±</p>
                <div className="mt-3 flex flex-wrap gap-2">
                    <span className="text-xs px-2 py-1 bg-red-900/50 text-red-400 rounded">11 ä»»å‹™</span>
                    <span className="text-xs px-2 py-1 bg-yellow-900/50 text-yellow-400 rounded">8 NPC</span>
                </div>
            </div>
        </div>
    </div>
);

// === æ•™è‚²ç³»çµ± (å®Œæ•´ç‰ˆ) ===
const Education = () => {
    const [tab, setTab] = useState('subjects');
    const [subjects, setSubjects] = useState([]);
    const [concepts, setConcepts] = useState([]);
    const [conceptLinks, setConceptLinks] = useState([]);
    const [knowledgeDetailed, setKnowledgeDetailed] = useState([]);
    const [curriculum108, setCurriculum108] = useState({ competencies: [], domains: [] });
    const [selectedSubject, setSelectedSubject] = useState(null);
    const [selectedConcept, setSelectedConcept] = useState(null);
    const [selectedKnowledge, setSelectedKnowledge] = useState(null);
    const [loading, setLoading] = useState(true);
    
    // æ¸¬é©—ç›¸é—œ
    const [quizMode, setQuizMode] = useState('menu');
    const [questions, setQuestions] = useState([]);
    const [currentQ, setCurrentQ] = useState(0);
    const [answer, setAnswer] = useState(null);
    const [result, setResult] = useState(null);
    const [score, setScore] = useState({ correct: 0, total: 0, streak: 0, maxStreak: 0 });
    const [timer, setTimer] = useState(30);
    const [timerOn, setTimerOn] = useState(false);
    const [quizSubject, setQuizSubject] = useState('all');
    const [quizCount, setQuizCount] = useState(10);

    useEffect(() => {
        setLoading(true);
        Promise.all([
            fetch(`${API}/api/v1/db/education/table/subjects?limit=20`).then(r => r.json()).catch(() => ({ data: [] })),
            fetch(`${API}/api/v1/db/education/table/concepts?limit=150`).then(r => r.json()).catch(() => ({ data: [] })),
            fetch(`${API}/api/v1/db/education/table/concept_links?limit=100`).then(r => r.json()).catch(() => ({ data: [] })),
            fetch(`${API}/api/v1/db/education/table/subject_knowledge_detailed?limit=50`).then(r => r.json()).catch(() => ({ data: [] })),
            fetch(`${API}/api/v1/db/education/table/curriculum_108_competencies?limit=20`).then(r => r.json()).catch(() => ({ data: [] })),
            fetch(`${API}/api/v1/db/education/table/curriculum_108_domains?limit=20`).then(r => r.json()).catch(() => ({ data: [] })),
        ]).then(([subj, conc, links, know, comp, dom]) => {
            setSubjects(subj.data || []);
            setConcepts(conc.data || []);
            setConceptLinks(links.data || []);
            setKnowledgeDetailed(know.data || []);
            setCurriculum108({ competencies: comp.data || [], domains: dom.data || [] });
            setLoading(false);
        });
    }, []);

    // è¨ˆæ™‚å™¨
    useEffect(() => {
        if (timerOn && timer > 0) {
            const t = setTimeout(() => setTimer(v => v - 1), 1000);
            return () => clearTimeout(t);
        } else if (timer === 0 && timerOn) {
            setTimerOn(false);
            setResult({ correct: false, timeout: true, correct_answer: questions[currentQ]?.answer });
            setScore(p => ({ ...p, total: p.total + 1, streak: 0 }));
        }
    }, [timer, timerOn]);

    // ç§‘ç›®åœ–æ¨™
    const subjectIcons = { chinese: 'ğŸ“–', english: 'ğŸ”¤', math: 'ğŸ”¢', physics: 'âš›ï¸', chemistry: 'ğŸ§ª', biology: 'ğŸ§¬', earth_science: 'ğŸŒ', history: 'ğŸ“œ', geography: 'ğŸ—ºï¸', civics: 'âš–ï¸' };
    const subjectColors = { chinese: 'border-red-500', english: 'border-blue-500', math: 'border-purple-500', physics: 'border-cyan-500', chemistry: 'border-green-500', biology: 'border-lime-500', earth_science: 'border-amber-500', history: 'border-orange-500', geography: 'border-teal-500', civics: 'border-pink-500' };

    // å–å¾—æ¦‚å¿µçš„å‰ç½®å’Œè¡ç”Ÿ
    const getConceptRelations = (conceptId) => {
        const prerequisites = conceptLinks.filter(l => l.target_id === conceptId).map(l => concepts.find(c => c.id === l.source_id)).filter(Boolean);
        const derivatives = conceptLinks.filter(l => l.source_id === conceptId).map(l => concepts.find(c => c.id === l.target_id)).filter(Boolean);
        return { prerequisites, derivatives };
    };

    // è¼‰å…¥æ¸¬é©—
    const loadQuestions = async () => {
        try {
            const url = quizSubject === 'all' ? `${API}/api/v1/education/questions?limit=${quizCount}` : `${API}/api/v1/education/questions?limit=${quizCount}&subject=${quizSubject}`;
            const res = await fetch(url);
            const data = await res.json();
            if (data.questions?.length > 0) {
                setQuestions(data.questions);
                setCurrentQ(0);
                setScore({ correct: 0, total: 0, streak: 0, maxStreak: 0 });
                setAnswer(null);
                setResult(null);
                setQuizMode('quiz');
                setTimer(30);
                setTimerOn(true);
            } else {
                alert('æ­¤ç§‘ç›®æ²’æœ‰é¡Œç›®');
            }
        } catch (e) { alert('è¼‰å…¥å¤±æ•—'); }
    };

    const checkAnswer = async (ans) => {
        if (result) return;
        setAnswer(ans);
        setTimerOn(false);
        try {
            const res = await fetch(`${API}/api/v1/education/check`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ question_id: questions[currentQ].question_id, answer: ans })
            });
            const data = await res.json();
            setResult(data);
            const newStreak = data.correct ? score.streak + 1 : 0;
            setScore(p => ({ correct: p.correct + (data.correct ? 1 : 0), total: p.total + 1, streak: newStreak, maxStreak: Math.max(p.maxStreak, newStreak) }));
        } catch (e) {}
    };

    const nextQuestion = () => {
        if (currentQ < questions.length - 1) {
            setCurrentQ(p => p + 1);
            setAnswer(null);
            setResult(null);
            setTimer(30);
            setTimerOn(true);
        } else {
            setQuizMode('result');
        }
    };

    if (loading) return <Loading />;

    // === ç§‘ç›®é¸æ“‡ ===
    const SubjectsTab = () => (
        <div className="space-y-6">
            <h3 className="font-semibold text-lg">ğŸ“š 108èª²ç¶±ç§‘ç›®</h3>
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                {subjects.map((s, i) => (
                    <div key={i} onClick={() => { setSelectedSubject(s); setTab('concepts'); }}
                        className={`card rounded-xl p-4 border cursor-pointer hover:border-blue-500 transition text-center ${subjectColors[s.code] || 'border-slate-600'}`}>
                        <div className="text-4xl mb-2">{subjectIcons[s.code] || 'ğŸ“˜'}</div>
                        <div className="font-bold">{s.name}</div>
                        <div className="text-xs text-slate-400 mt-1">{s.category}</div>
                        <div className="text-xs text-slate-500">{concepts.filter(c => c.subject_code === s.code).length} æ¦‚å¿µ</div>
                    </div>
                ))}
            </div>
            
            <h3 className="font-semibold text-lg mt-8">ğŸ¯ 108èª²ç¶±æ ¸å¿ƒç´ é¤Š</h3>
            <div className="grid md:grid-cols-3 gap-4">
                {curriculum108.competencies.map((c, i) => (
                    <div key={i} className="card rounded-xl p-4 border border-slate-700">
                        <div className="flex items-center gap-2 mb-2">
                            <span className={`px-2 py-1 rounded text-xs ${c.dimension_code === 'A' ? 'bg-red-900/50 text-red-400' : c.dimension_code === 'B' ? 'bg-blue-900/50 text-blue-400' : 'bg-green-900/50 text-green-400'}`}>
                                {c.competency_code}
                            </span>
                            <span className="font-bold text-sm">{c.competency_name}</span>
                        </div>
                        <p className="text-xs text-slate-400 line-clamp-3">{c.description}</p>
                        {c.e18k_mapping && <div className="mt-2 text-xs text-purple-400">ğŸ® E18K: {c.e18k_mapping}</div>}
                    </div>
                ))}
            </div>

            <h3 className="font-semibold text-lg mt-8">ğŸ“– å­¸ç¿’é ˜åŸŸ</h3>
            <div className="grid md:grid-cols-4 gap-4">
                {curriculum108.domains.map((d, i) => (
                    <div key={i} className="card rounded-xl p-4 border border-slate-700">
                        <div className="font-bold text-blue-400">{d.domain_name}</div>
                        <div className="text-xs text-slate-400 mt-1">{d.subjects}</div>
                        {d.e18k_integration && <div className="mt-2 text-xs text-green-400">ğŸ® {d.e18k_integration}</div>}
                    </div>
                ))}
            </div>
        </div>
    );

    // === æ¦‚å¿µ/çŸ¥è­˜ç¯€é» ===
    const ConceptsTab = () => {
        const filteredConcepts = selectedSubject ? concepts.filter(c => c.subject_code === selectedSubject.code) : concepts;
        
        return (
            <div className="space-y-4">
                <div className="flex items-center justify-between">
                    <div className="flex items-center gap-2">
                        <button onClick={() => { setSelectedSubject(null); setTab('subjects'); }} className="text-slate-400 hover:text-white">â† è¿”å›</button>
                        {selectedSubject && (
                            <span className="text-lg font-bold">
                                {subjectIcons[selectedSubject.code]} {selectedSubject.name} çŸ¥è­˜ç¯€é»
                            </span>
                        )}
                    </div>
                    <span className="text-sm text-slate-400">{filteredConcepts.length} å€‹æ¦‚å¿µ</span>
                </div>
                
                <div className="grid md:grid-cols-2 gap-4">
                    {filteredConcepts.map((c, i) => {
                        const relations = getConceptRelations(c.id);
                        return (
                            <div key={i} onClick={() => setSelectedConcept(c)}
                                className={`knowledge-card card rounded-xl p-4 cursor-pointer hover:border-blue-500 transition ${subjectColors[c.subject_code] || 'border-slate-600'}`}>
                                <div className="flex justify-between items-start mb-2">
                                    <h4 className="font-bold text-blue-400">{c.title}</h4>
                                    <div className="flex gap-1">
                                        <span className="text-xs px-2 py-0.5 bg-slate-700 rounded">Ch.{c.chapter}</span>
                                        <span className="text-xs px-2 py-0.5 bg-slate-700 rounded">é›£åº¦ {c.difficulty}</span>
                                    </div>
                                </div>
                                <p className="text-sm text-slate-300 line-clamp-2">{c.content}</p>
                                {c.keywords && (
                                    <div className="mt-2 flex flex-wrap gap-1">
                                        {JSON.parse(c.keywords || '[]').slice(0, 4).map((k, j) => (
                                            <span key={j} className="text-xs px-2 py-0.5 bg-blue-900/30 text-blue-400 rounded">{k}</span>
                                        ))}
                                    </div>
                                )}
                                <div className="mt-3 flex gap-4 text-xs text-slate-500">
                                    {relations.prerequisites.length > 0 && <span>â¬…ï¸ {relations.prerequisites.length} å‰ç½®</span>}
                                    {relations.derivatives.length > 0 && <span>â¡ï¸ {relations.derivatives.length} è¡ç”Ÿ</span>}
                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>
        );
    };

    // === è©³ç´°çŸ¥è­˜ (å«è§£é‡‹ã€ç¯„ä¾‹ã€å£è¨£) ===
    const KnowledgeTab = () => (
        <div className="space-y-4">
            <h3 className="font-semibold text-lg">ğŸ“ è©³ç´°çŸ¥è­˜ç¯€é»</h3>
            <p className="text-sm text-slate-400">åŒ…å«è©³ç´°è§£é‡‹ã€ç¯„ä¾‹ã€å¸¸è¦‹éŒ¯èª¤ã€è¨˜æ†¶å£è¨£</p>
            
            <div className="space-y-4">
                {knowledgeDetailed.map((k, i) => (
                    <div key={i} onClick={() => setSelectedKnowledge(k)}
                        className="card rounded-xl p-4 border border-slate-700 cursor-pointer hover:border-blue-500 transition">
                        <div className="flex justify-between items-start">
                            <div>
                                <span className="text-xs px-2 py-0.5 bg-blue-900/50 text-blue-400 rounded mr-2">{k.subject_name}</span>
                                <span className="text-xs text-slate-500">{k.chapter}</span>
                            </div>
                            <span className={`text-xs px-2 py-0.5 rounded ${k.difficulty <= 2 ? 'bg-green-900/50 text-green-400' : k.difficulty <= 3 ? 'bg-yellow-900/50 text-yellow-400' : 'bg-red-900/50 text-red-400'}`}>
                                é›£åº¦ {k.difficulty}
                            </span>
                        </div>
                        <h4 className="font-bold text-lg mt-2">{k.topic}</h4>
                        <p className="text-sm text-slate-300 mt-1">{k.content}</p>
                        <div className="mt-3 flex flex-wrap gap-2">
                            {k.detailed_explanation && <span className="text-xs px-2 py-1 bg-purple-900/30 text-purple-400 rounded">ğŸ“– è©³è§£</span>}
                            {k.examples && <span className="text-xs px-2 py-1 bg-green-900/30 text-green-400 rounded">ğŸ“ ç¯„ä¾‹</span>}
                            {k.mnemonics && <span className="text-xs px-2 py-1 bg-yellow-900/30 text-yellow-400 rounded">ğŸ’¡ å£è¨£</span>}
                            {k.common_mistakes && <span className="text-xs px-2 py-1 bg-red-900/30 text-red-400 rounded">âš ï¸ å¸¸éŒ¯</span>}
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );

    // === å¿ƒæ™ºåœ– ===
    const MindMapTab = () => {
        const [centerConcept, setCenterConcept] = useState(null);
        const conceptsWithLinks = concepts.filter(c => conceptLinks.some(l => l.source_id === c.id || l.target_id === c.id));
        
        if (!centerConcept && conceptsWithLinks.length > 0) {
            setCenterConcept(conceptsWithLinks[0]);
        }
        
        if (!centerConcept) return <div className="text-center py-8 text-slate-400">è¼‰å…¥ä¸­...</div>;
        
        const relations = getConceptRelations(centerConcept.id);
        
        return (
            <div className="space-y-4">
                <h3 className="font-semibold text-lg">ğŸ§  æ¦‚å¿µå¿ƒæ™ºåœ–</h3>
                <p className="text-sm text-slate-400">é¸æ“‡æ¦‚å¿µæŸ¥çœ‹å‰ç½®èˆ‡è¡ç”Ÿé—œä¿‚</p>
                
                <div className="flex flex-wrap gap-2 mb-4">
                    {conceptsWithLinks.slice(0, 15).map((c, i) => (
                        <button key={i} onClick={() => setCenterConcept(c)}
                            className={`px-3 py-1 rounded-lg text-sm ${centerConcept?.id === c.id ? 'bg-blue-600' : 'bg-slate-700 hover:bg-slate-600'}`}>
                            {c.title}
                        </button>
                    ))}
                </div>
                
                <div className="card rounded-xl p-6 border border-slate-700">
                    <div className="grid grid-cols-3 gap-4 items-center">
                        {/* å‰ç½®æ¦‚å¿µ */}
                        <div className="space-y-2">
                            <div className="text-center text-sm text-slate-400 mb-2">â¬…ï¸ å‰ç½®æ¦‚å¿µ</div>
                            {relations.prerequisites.length > 0 ? relations.prerequisites.map((p, i) => (
                                <div key={i} onClick={() => setCenterConcept(p)}
                                    className="mind-map-node card rounded-lg p-3 border border-orange-500/50 cursor-pointer hover:border-orange-400">
                                    <div className="font-bold text-sm text-orange-400">{p.title}</div>
                                    <div className="text-xs text-slate-400 line-clamp-1">{p.content?.substring(0, 30)}...</div>
                                </div>
                            )) : <div className="text-center text-slate-500 text-sm">ç„¡å‰ç½®</div>}
                        </div>
                        
                        {/* ä¸­å¿ƒæ¦‚å¿µ */}
                        <div className="text-center">
                            <div className="card rounded-xl p-6 border-2 border-blue-500 bg-blue-900/20">
                                <div className="text-2xl mb-2">ğŸ“</div>
                                <div className="font-bold text-lg text-blue-400">{centerConcept.title}</div>
                                <div className="text-sm text-slate-300 mt-2">{centerConcept.content?.substring(0, 60)}...</div>
                                <div className="text-xs text-slate-500 mt-2">{centerConcept.subject_code} Â· Ch.{centerConcept.chapter}</div>
                            </div>
                        </div>
                        
                        {/* è¡ç”Ÿæ¦‚å¿µ */}
                        <div className="space-y-2">
                            <div className="text-center text-sm text-slate-400 mb-2">è¡ç”Ÿæ¦‚å¿µ â¡ï¸</div>
                            {relations.derivatives.length > 0 ? relations.derivatives.map((d, i) => (
                                <div key={i} onClick={() => setCenterConcept(d)}
                                    className="mind-map-node card rounded-lg p-3 border border-green-500/50 cursor-pointer hover:border-green-400">
                                    <div className="font-bold text-sm text-green-400">{d.title}</div>
                                    <div className="text-xs text-slate-400 line-clamp-1">{d.content?.substring(0, 30)}...</div>
                                </div>
                            )) : <div className="text-center text-slate-500 text-sm">ç„¡è¡ç”Ÿ</div>}
                        </div>
                    </div>
                </div>
                
                {/* é€£çµèªªæ˜ */}
                <div className="card rounded-xl p-4 border border-slate-700">
                    <h4 className="font-semibold mb-2">ğŸ“ æ¦‚å¿µé€£çµèªªæ˜</h4>
                    <div className="space-y-2">
                        {conceptLinks.filter(l => l.target_id === centerConcept.id || l.source_id === centerConcept.id).map((l, i) => (
                            <div key={i} className="text-sm flex items-center gap-2">
                                <span className="text-orange-400">{concepts.find(c => c.id === l.source_id)?.title}</span>
                                <span className="text-slate-500">â†’</span>
                                <span className="text-green-400">{concepts.find(c => c.id === l.target_id)?.title}</span>
                                {l.description && <span className="text-xs text-slate-400">({l.description})</span>}
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );
    };

    // === æ¸¬é©— ===
    const QuizTab = () => {
        if (quizMode === 'quiz') {
            const q = questions[currentQ];
            if (!q) return <Loading />;
            const opts = Array.isArray(q.options) ? q.options : [];
            
            return (
                <div className="max-w-3xl mx-auto space-y-4">
                    <div className="flex justify-between items-center">
                        <button onClick={() => { setQuizMode('menu'); setTimerOn(false); }} className="text-slate-400 hover:text-white">â† è¿”å›</button>
                        <div className="flex items-center gap-4">
                            {score.streak >= 3 && <span className="text-orange-400 bounce">ğŸ”¥ {score.streak}</span>}
                            <span className="text-green-400 font-bold">{score.correct}/{score.total}</span>
                        </div>
                    </div>
                    
                    <div className="card rounded-xl p-6 border border-slate-700">
                        <div className="flex justify-between text-sm text-slate-400 mb-2">
                            <span>é¡Œç›® {currentQ + 1}/{questions.length}</span>
                            <span className={timer <= 10 ? 'text-red-400 font-bold' : ''}>{timer}s</span>
                        </div>
                        <div className="h-1.5 bg-slate-700 rounded-full mb-4">
                            <div className={`h-1.5 rounded-full progress-bar ${timer <= 10 ? 'bg-red-500' : 'bg-green-500'}`} style={{ width: `${(timer / 30) * 100}%` }}></div>
                        </div>
                        
                        <div className="mb-2"><span className="text-xs px-2 py-1 bg-blue-900/50 text-blue-400 rounded">{q.subject || q.subject_id}</span></div>
                        <h2 className="text-lg mb-6">{q.question_text}</h2>
                        
                        <div className="space-y-2">
                            {opts.map((opt, i) => {
                                const letter = opt.charAt(0);
                                const isSelected = answer === letter;
                                const isCorrect = result?.correct_answer === letter;
                                const isWrong = isSelected && !result?.correct;
                                let cls = 'border-slate-600 hover:border-blue-500';
                                if (result) {
                                    if (isCorrect) cls = 'border-green-500 bg-green-900/30 bounce';
                                    else if (isWrong) cls = 'border-red-500 bg-red-900/30 shake';
                                    else cls = 'border-slate-700 opacity-50';
                                }
                                return (
                                    <button key={i} onClick={() => checkAnswer(letter)} disabled={!!result}
                                        className={`w-full text-left p-3 rounded-lg border-2 transition ${cls}`}>
                                        <span className="font-bold mr-2">{letter}.</span>{opt.substring(2)}
                                    </button>
                                );
                            })}
                        </div>
                        
                        {result && (
                            <div className={`mt-4 p-4 rounded-lg fade-in ${result.correct ? 'bg-green-900/30 border border-green-600' : 'bg-red-900/30 border border-red-600'}`}>
                                <div className="font-bold">
                                    {result.timeout ? 'â° æ™‚é–“åˆ°ï¼' : result.correct ? 'âœ… ç­”å°äº†ï¼' : 'âŒ ç­”éŒ¯äº†'}
                                    {!result.correct && <span className="ml-2 text-green-400">æ­£ç¢º: {result.correct_answer}</span>}
                                </div>
                                {q.explanation && <p className="text-slate-300 text-sm mt-2">{q.explanation}</p>}
                            </div>
                        )}
                        
                        {result && (
                            <button onClick={nextQuestion} className="w-full py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold mt-4">
                                {currentQ < questions.length - 1 ? 'ä¸‹ä¸€é¡Œ â†’' : 'æŸ¥çœ‹çµæœ ğŸ†'}
                            </button>
                        )}
                    </div>
                </div>
            );
        }
        
        if (quizMode === 'result') {
            const pct = Math.round((score.correct / score.total) * 100);
            const grade = pct >= 90 ? 'S' : pct >= 80 ? 'A' : pct >= 70 ? 'B' : pct >= 60 ? 'C' : 'D';
            const colors = { S: 'text-yellow-400', A: 'text-green-400', B: 'text-blue-400', C: 'text-orange-400', D: 'text-red-400' };
            return (
                <div className="max-w-md mx-auto card rounded-xl p-8 border border-slate-700 text-center">
                    <div className="text-5xl mb-4">ğŸ‰</div>
                    <h2 className="text-2xl font-bold">æŒ‘æˆ°å®Œæˆï¼</h2>
                    <div className={`text-8xl font-bold my-6 ${colors[grade]}`}>{grade}</div>
                    <div className="grid grid-cols-3 gap-4 mb-6">
                        <div className="bg-slate-800 p-3 rounded-lg"><div className="text-2xl font-bold text-green-400">{score.correct}</div><div className="text-xs text-slate-500">ç­”å°</div></div>
                        <div className="bg-slate-800 p-3 rounded-lg"><div className="text-2xl font-bold">{pct}%</div><div className="text-xs text-slate-500">æ­£ç¢ºç‡</div></div>
                        <div className="bg-slate-800 p-3 rounded-lg"><div className="text-2xl font-bold text-orange-400">{score.maxStreak}</div><div className="text-xs text-slate-500">æœ€é«˜é€£å‹</div></div>
                    </div>
                    <div className="flex gap-3">
                        <button onClick={() => setQuizMode('menu')} className="flex-1 py-2 bg-slate-700 rounded-lg">è¿”å›</button>
                        <button onClick={loadQuestions} className="flex-1 py-2 bg-blue-600 rounded-lg">å†ç©</button>
                    </div>
                </div>
            );
        }
        
        // æ¸¬é©—é¸å–®
        return (
            <div className="space-y-6">
                <h3 className="font-semibold text-lg">ğŸ¯ çŸ¥è­˜æŒ‘æˆ°</h3>
                <div className="grid md:grid-cols-2 gap-6">
                    <div className="card rounded-xl p-6 border border-slate-700">
                        <h4 className="font-semibold mb-4">é¸æ“‡ç§‘ç›®</h4>
                        <div className="grid grid-cols-3 gap-2">
                            <button onClick={() => setQuizSubject('all')} className={`p-2 rounded-lg text-sm ${quizSubject === 'all' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ“š å…¨éƒ¨</button>
                            <button onClick={() => setQuizSubject('æ•¸å­¸')} className={`p-2 rounded-lg text-sm ${quizSubject === 'æ•¸å­¸' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ”¢ æ•¸å­¸</button>
                            <button onClick={() => setQuizSubject('åœ‹æ–‡')} className={`p-2 rounded-lg text-sm ${quizSubject === 'åœ‹æ–‡' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ“– åœ‹æ–‡</button>
                            <button onClick={() => setQuizSubject('è‹±æ–‡')} className={`p-2 rounded-lg text-sm ${quizSubject === 'è‹±æ–‡' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ”¤ è‹±æ–‡</button>
                            <button onClick={() => setQuizSubject('è‡ªç„¶')} className={`p-2 rounded-lg text-sm ${quizSubject === 'è‡ªç„¶' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ”¬ è‡ªç„¶</button>
                            <button onClick={() => setQuizSubject('ç¤¾æœƒ')} className={`p-2 rounded-lg text-sm ${quizSubject === 'ç¤¾æœƒ' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸŒ ç¤¾æœƒ</button>
                        </div>
                    </div>
                    <div className="card rounded-xl p-6 border border-slate-700">
                        <h4 className="font-semibold mb-4">é¡Œæ•¸</h4>
                        <div className="flex gap-2 mb-4">
                            {[5, 10, 15, 20].map(n => (
                                <button key={n} onClick={() => setQuizCount(n)} className={`px-4 py-2 rounded-lg ${quizCount === n ? 'bg-green-600' : 'bg-slate-700'}`}>{n}</button>
                            ))}
                        </div>
                        <button onClick={loadQuestions} className="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold">ğŸš€ é–‹å§‹æŒ‘æˆ°</button>
                    </div>
                </div>
            </div>
        );
    };

    return (
        <div className="space-y-6">
            <h1 className="text-2xl font-bold">ğŸ“š æ•™è‚²ç³»çµ±</h1>
            
            <div className="flex gap-2 flex-wrap">
                <button onClick={() => { setTab('subjects'); setSelectedSubject(null); }} className={`px-4 py-2 rounded-lg ${tab === 'subjects' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ“– 108èª²ç¶±</button>
                <button onClick={() => setTab('concepts')} className={`px-4 py-2 rounded-lg ${tab === 'concepts' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ§© çŸ¥è­˜ç¯€é»</button>
                <button onClick={() => setTab('knowledge')} className={`px-4 py-2 rounded-lg ${tab === 'knowledge' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ“ è©³è§£å£è¨£</button>
                <button onClick={() => setTab('mindmap')} className={`px-4 py-2 rounded-lg ${tab === 'mindmap' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ§  å¿ƒæ™ºåœ–</button>
                <button onClick={() => setTab('quiz')} className={`px-4 py-2 rounded-lg ${tab === 'quiz' ? 'bg-blue-600' : 'bg-slate-700'}`}>ğŸ¯ æ¸¬é©—</button>
            </div>
            
            {tab === 'subjects' && <SubjectsTab />}
            {tab === 'concepts' && <ConceptsTab />}
            {tab === 'knowledge' && <KnowledgeTab />}
            {tab === 'mindmap' && <MindMapTab />}
            {tab === 'quiz' && <QuizTab />}
            
            {/* æ¦‚å¿µè©³æƒ… Modal */}
            <Modal open={!!selectedConcept} onClose={() => setSelectedConcept(null)} title={selectedConcept?.title} wide>
                {selectedConcept && (() => {
                    const relations = getConceptRelations(selectedConcept.id);
                    return (
                        <div className="space-y-4">
                            <div className="flex flex-wrap gap-2">
                                <span className="px-2 py-1 bg-blue-900/50 text-blue-400 rounded text-sm">{selectedConcept.subject_code}</span>
                                <span className="px-2 py-1 bg-slate-700 rounded text-sm">Ch.{selectedConcept.chapter} - {selectedConcept.section}</span>
                                <span className="px-2 py-1 bg-slate-700 rounded text-sm">é›£åº¦ {selectedConcept.difficulty}</span>
                                <span className="px-2 py-1 bg-slate-700 rounded text-sm">é‡è¦åº¦ {selectedConcept.importance}</span>
                            </div>
                            
                            <div className="card rounded-lg p-4 border border-slate-700">
                                <h4 className="font-semibold mb-2">ğŸ“– å…§å®¹</h4>
                                <p className="text-slate-300 whitespace-pre-wrap">{selectedConcept.content}</p>
                            </div>
                            
                            {selectedConcept.keywords && (
                                <div>
                                    <h4 className="font-semibold mb-2">ğŸ·ï¸ é—œéµå­—</h4>
                                    <div className="flex flex-wrap gap-2">
                                        {JSON.parse(selectedConcept.keywords || '[]').map((k, i) => (
                                            <span key={i} className="px-3 py-1 bg-blue-900/30 text-blue-400 rounded-full text-sm">{k}</span>
                                        ))}
                                    </div>
                                </div>
                            )}
                            
                            <div className="grid md:grid-cols-2 gap-4">
                                <div className="card rounded-lg p-4 border border-orange-500/30">
                                    <h4 className="font-semibold text-orange-400 mb-2">â¬…ï¸ å‰ç½®è§€å¿µ ({relations.prerequisites.length})</h4>
                                    {relations.prerequisites.length > 0 ? (
                                        <div className="space-y-2">
                                            {relations.prerequisites.map((p, i) => (
                                                <div key={i} className="text-sm p-2 bg-slate-800 rounded">{p.title}</div>
                                            ))}
                                        </div>
                                    ) : <p className="text-slate-500 text-sm">ç„¡å‰ç½®è§€å¿µ</p>}
                                </div>
                                <div className="card rounded-lg p-4 border border-green-500/30">
                                    <h4 className="font-semibold text-green-400 mb-2">â¡ï¸ è¡ç”Ÿè§€å¿µ ({relations.derivatives.length})</h4>
                                    {relations.derivatives.length > 0 ? (
                                        <div className="space-y-2">
                                            {relations.derivatives.map((d, i) => (
                                                <div key={i} className="text-sm p-2 bg-slate-800 rounded">{d.title}</div>
                                            ))}
                                        </div>
                                    ) : <p className="text-slate-500 text-sm">ç„¡è¡ç”Ÿè§€å¿µ</p>}
                                </div>
                            </div>
                        </div>
                    );
                })()}
            </Modal>
            
            {/* è©³ç´°çŸ¥è­˜ Modal */}
            <Modal open={!!selectedKnowledge} onClose={() => setSelectedKnowledge(null)} title={selectedKnowledge?.topic} wide>
                {selectedKnowledge && (
                    <div className="space-y-4">
                        <div className="flex flex-wrap gap-2">
                            <span className="px-2 py-1 bg-blue-900/50 text-blue-400 rounded text-sm">{selectedKnowledge.subject_name}</span>
                            <span className="px-2 py-1 bg-slate-700 rounded text-sm">{selectedKnowledge.chapter}</span>
                            <span className="px-2 py-1 bg-slate-700 rounded text-sm">é›£åº¦ {selectedKnowledge.difficulty}</span>
                        </div>
                        
                        {selectedKnowledge.detailed_explanation && (
                            <div className="card rounded-lg p-4 border border-purple-500/30">
                                <h4 className="font-semibold text-purple-400 mb-2">ğŸ“– è©³ç´°è§£é‡‹</h4>
                                <div className="text-slate-300 whitespace-pre-wrap text-sm">{selectedKnowledge.detailed_explanation}</div>
                            </div>
                        )}
                        
                        {selectedKnowledge.examples && (
                            <div className="card rounded-lg p-4 border border-green-500/30">
                                <h4 className="font-semibold text-green-400 mb-2">ğŸ“ ç¯„ä¾‹</h4>
                                <div className="text-slate-300 whitespace-pre-wrap text-sm">{selectedKnowledge.examples}</div>
                            </div>
                        )}
                        
                        {selectedKnowledge.mnemonics && (
                            <div className="card rounded-lg p-4 border border-yellow-500/30">
                                <h4 className="font-semibold text-yellow-400 mb-2">ğŸ’¡ è¨˜æ†¶å£è¨£</h4>
                                <div className="text-slate-300 text-lg">{selectedKnowledge.mnemonics}</div>
                            </div>
                        )}
                        
                        {selectedKnowledge.common_mistakes && (
                            <div className="card rounded-lg p-4 border border-red-500/30">
                                <h4 className="font-semibold text-red-400 mb-2">âš ï¸ å¸¸è¦‹éŒ¯èª¤</h4>
                                <div className="text-slate-300 whitespace-pre-wrap text-sm">{selectedKnowledge.common_mistakes}</div>
                            </div>
                        )}
                        
                        {selectedKnowledge.related_topics && (
                            <div>
                                <h4 className="font-semibold mb-2">ğŸ”— ç›¸é—œä¸»é¡Œ</h4>
                                <p className="text-slate-400">{selectedKnowledge.related_topics}</p>
                            </div>
                        )}
                    </div>
                )}
            </Modal>
        </div>
    );
};

// === è™›æ“¬åœ°çƒ (ç°¡åŒ–ç‰ˆ) ===
const VirtualEarth = () => {
    const [player, setPlayer] = useState({ hp: 100, maxHp: 100, gold: 500, exp: 0, level: 1, completed: [] });
    const [currentQuest, setCurrentQuest] = useState(null);
    const [questResult, setQuestResult] = useState(null);

    const scenarios = [
        { id: 'S001', title: 'ç¥ç§˜æŠ•è³‡æ©Ÿæœƒ', difficulty: 'ç°¡å–®', description: 'ä½ æ”¶åˆ°è¨Šæ¯ï¼šã€Œç¨å®¶å…§ç·šï¼ä¿è­‰å ±é…¬50%ï¼åªé™ä»Šå¤©ï¼ã€', options: [{ id: 'A', text: 'ç«‹å³åŒ¯æ¬¾', correct: false, feedback: 'âŒ ã€Œä¿è­‰ç²åˆ©ã€æ˜¯æœ€å¤§è­¦è¨Šï¼' }, { id: 'B', text: 'æŸ¥è­‰èº«ä»½', correct: true, feedback: 'âœ… æ­£ç¢ºï¼æ°¸é å…ˆæŸ¥è­‰ã€‚' }], exp: 100, gold: 50 },
        { id: 'S002', title: 'å‡å†’éŠ€è¡Œ', difficulty: 'ç°¡å–®', description: 'ã€Œæˆ‘æ˜¯éŠ€è¡Œé¢¨æ§ï¼Œå¸³æˆ¶ç•°å¸¸ï¼Œè«‹æä¾›å¯†ç¢¼é©—è­‰ã€‚ã€', options: [{ id: 'A', text: 'æä¾›å¯†ç¢¼', correct: false, feedback: 'âŒ éŠ€è¡Œçµ•ä¸è¦å¯†ç¢¼ï¼' }, { id: 'B', text: 'æ›æ–·è‡ªæ‰“å®¢æœ', correct: true, feedback: 'âœ… æ­£ç¢ºï¼è‡ªå·±æ’¥å®˜æ–¹é›»è©±ã€‚' }], exp: 100, gold: 50 },
        { id: 'S003', title: 'ç¶²è³¼è¶…ä½åƒ¹', difficulty: 'ä¸­ç­‰', description: 'åç‰ŒåŒ…1/10åƒ¹æ ¼ï¼Œè¦ç§ä¸‹è½‰å¸³ã€‚', options: [{ id: 'A', text: 'åŒ¯æ¬¾', correct: false, feedback: 'âŒ ç§ä¸‹è½‰å¸³æ²’ä¿éšœï¼' }, { id: 'B', text: 'ç”¨è¦çš®äº¤æ˜“', correct: true, feedback: 'âœ… ä½¿ç”¨æœ‰ä¿éšœçš„å¹³å°ã€‚' }], exp: 150, gold: 80 },
        { id: 'S004', title: 'äº¤å‹å€ŸéŒ¢', difficulty: 'å›°é›£', description: 'ç¶²å‹èªªåª½åª½ä½é™¢å€Ÿ5è¬ã€‚', options: [{ id: 'A', text: 'å€ŸéŒ¢', correct: false, feedback: 'âŒ æ®ºè±¬ç›¤è©é¨™ï¼' }, { id: 'B', text: 'è¦æ±‚è¦–è¨Š', correct: true, feedback: 'âœ… è©é¨™è€…æœƒæ‹’çµ•è¦–è¨Šã€‚' }], exp: 200, gold: 120 },
        { id: 'S005', title: 'ä¸­çç°¡è¨Š', difficulty: 'ç°¡å–®', description: 'ã€ŒæŠ½ä¸­iPhoneï¼ä»˜399é‹è²»é ˜å–ï¼ã€', options: [{ id: 'A', text: 'ä»˜æ¬¾', correct: false, feedback: 'âŒ é ä»˜è²»è©é¨™ï¼' }, { id: 'B', text: 'ç¢ºèªæœ‰ç„¡åƒåŠ ', correct: true, feedback: 'âœ… æ²’åƒåŠ ä¸å¯èƒ½ä¸­çã€‚' }], exp: 80, gold: 40 },
    ];

    const startQuest = (q) => { setCurrentQuest(q); setQuestResult(null); };
    const answerQuest = (opt) => {
        setQuestResult(opt);
        if (opt.correct) {
            setPlayer(p => ({ ...p, exp: p.exp + currentQuest.exp, gold: p.gold + currentQuest.gold, level: Math.floor((p.exp + currentQuest.exp) / 300) + 1, completed: [...p.completed, currentQuest.id] }));
        } else {
            setPlayer(p => ({ ...p, hp: Math.max(0, p.hp - 20), exp: p.exp + 20 }));
        }
    };

    if (currentQuest) {
        return (
            <div className="max-w-3xl mx-auto space-y-4">
                <button onClick={() => setCurrentQuest(null)} className="text-slate-400 hover:text-white">â† è¿”å›</button>
                <div className="card rounded-xl border border-slate-700 overflow-hidden">
                    <div className="bg-gradient-to-r from-red-600 to-orange-600 p-4">
                        <h2 className="font-bold text-lg">ğŸš¨ {currentQuest.title}</h2>
                    </div>
                    <div className="p-6">
                        <div className="bg-slate-900/50 rounded-lg p-4 mb-6 border-l-4 border-yellow-500">
                            <p className="text-lg">{currentQuest.description}</p>
                        </div>
                        <div className="space-y-2">
                            {currentQuest.options?.map((opt, i) => {
                                const isSelected = questResult?.id === opt.id;
                                let cls = 'border-slate-600 hover:border-blue-500';
                                if (questResult) {
                                    if (opt.correct) cls = 'border-green-500 bg-green-900/30';
                                    else if (isSelected) cls = 'border-red-500 bg-red-900/30 shake';
                                    else cls = 'border-slate-700 opacity-50';
                                }
                                return (
                                    <button key={i} onClick={() => !questResult && answerQuest(opt)} disabled={!!questResult}
                                        className={`w-full text-left p-3 rounded-lg border-2 transition ${cls}`}>
                                        <span className="font-bold text-blue-400 mr-2">{opt.id}.</span>{opt.text}
                                    </button>
                                );
                            })}
                        </div>
                        {questResult && (
                            <div className={`mt-4 p-4 rounded-lg fade-in ${questResult.correct ? 'bg-green-900/30 border border-green-600' : 'bg-red-900/30 border border-red-600'}`}>
                                <p>{questResult.feedback}</p>
                                {questResult.correct && <div className="mt-2 text-sm">ğŸ† +{currentQuest.exp} EXP | ğŸ’° +{currentQuest.gold}</div>}
                            </div>
                        )}
                        {questResult && <button onClick={() => setCurrentQuest(null)} className="w-full py-2 bg-blue-600 rounded-lg mt-4">è¿”å›</button>}
                    </div>
                </div>
            </div>
        );
    }

    return (
        <div className="space-y-6">
            <h1 className="text-2xl font-bold">ğŸŒ è™›æ“¬åœ°çƒ - E18K é˜²è©éŠæˆ²</h1>
            <div className="card rounded-xl p-4 border border-slate-700">
                <div className="flex items-center justify-between">
                    <div className="flex items-center gap-3">
                        <div className="w-12 h-12 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center text-xl">ğŸ§™</div>
                        <div>
                            <div className="font-bold">Lv.{player.level} é˜²è©å‹‡å£«</div>
                            <div className="text-sm text-slate-400">{player.completed.length}/{scenarios.length} å®Œæˆ</div>
                        </div>
                    </div>
                    <div className="flex gap-4 text-sm">
                        <span className="text-red-400">â¤ï¸ {player.hp}</span>
                        <span className="text-yellow-400">ğŸ’° {player.gold}</span>
                        <span className="text-green-400">â­ {player.exp}</span>
                    </div>
                </div>
            </div>
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                {scenarios.map((s, i) => {
                    const done = player.completed.includes(s.id);
                    return (
                        <div key={i} className={`card rounded-xl p-4 border ${done ? 'border-green-600' : 'border-slate-700'}`}>
                            <div className="flex justify-between mb-2">
                                <h3 className="font-bold text-blue-400">{s.title}</h3>
                                {done && <span className="text-green-400">âœ…</span>}
                            </div>
                            <p className="text-sm text-slate-400 line-clamp-2">{s.description}</p>
                            <div className="mt-3 flex justify-between items-center">
                                <span className="text-xs text-slate-500">ğŸ†{s.exp} ğŸ’°{s.gold}</span>
                                <button onClick={() => startQuest(s)} className={`px-3 py-1 rounded text-sm ${done ? 'bg-slate-700' : 'bg-blue-600'}`}>{done ? 'é‡ç©' : 'æŒ‘æˆ°'}</button>
                            </div>
                        </div>
                    );
                })}
            </div>
        </div>
    );
};

// === App ===
const App = () => {
    const [page, setPage] = useState('home');
    return (
        <div className="min-h-screen">
            <Navbar page={page} setPage={setPage} />
            <main className="max-w-6xl mx-auto px-4 py-6">
                {page === 'home' && <Home setPage={setPage} />}
                {page === 'edu' && <Education />}
                {page === 've' && <VirtualEarth />}
            </main>
            <footer className="text-center py-4 text-slate-500 text-sm border-t border-slate-800">
                <p>VE-System v1.0 | åŒ—æ–—ä¸ƒæ˜Ÿæ–‡å‰µæ•¸ä½æœ‰é™å…¬å¸ | é“çš„1%åŸå‰‡</p>
            </footer>
        </div>
    );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>